# 東京都バリアフリートイレデータ（市区町村別）

このディレクトリには、東京都のバリアフリートイレデータを市区町村別に分割したCSVファイルが含まれています。

## ディレクトリ構造

```
by_municipality/
├── 23ku/           # 東京23特別区
├── tama/           # 多摩地域（市部）
├── islands/        # 島嶼部（町村部）
├── other/          # その他
└── README.md       # このファイル
```

## データ形式

各CSVファイルは以下の形式になっています：

| 列名 | 説明 |
|------|------|
| name | 施設名 |
| address | 住所 |
| floor | 階数 |
| toilet_name | トイレ名 |
| note | 備考（設備情報など） |
| color | 色コード |
| lng | 経度 |
| lat | 緯度 |

## 分割基準

- **23特別区** (`23ku/`): 区で終わる自治体（港区、新宿区など）
- **多摩地域** (`tama/`): 市で終わる自治体（立川市、調布市など）
- **島嶼部** (`islands/`): 町・村で終わる自治体（大島町、三宅村など）
- **その他** (`other/`): 上記に該当しないもの

## ファイル命名規則

市区町村名をローマ字表記に変換し、以下の規則で命名：

- 区 → `_ku`
- 市 → `_shi`
- 町 → `_machi`
- 村 → `_mura`

例：
- 港区 → `minato_ku.csv`
- 立川市 → `tachikawa_shi.csv`
- 大島町 → `oshima_machi.csv`
- 三宅村 → `miyake_mura.csv`

## データ分割ツール

このデータは以下のスクリプトで生成されています：

### 実行方法

```bash
# デフォルト設定で実行
node scripts/splitCSV.js

# カスタムパスで実行
node scripts/splitCSV.js [入力CSVファイル] [出力ディレクトリ]
```

### 必要な環境

- Node.js 14.0以上
- `fs`、`path`モジュール（標準ライブラリ）

## 使用例

### 特定の区のデータを読み込む

```javascript
const fs = require('fs');
const path = require('path');

// 港区のデータを読み込む
const minatoData = fs.readFileSync(
    path.join(__dirname, '23ku/minato_ku.csv'), 
    'utf8'
);

console.log('港区のバリアフリートイレ情報:', minatoData);
```

### 統計情報の取得

分割実行時に以下の統計情報が表示されます：

- 総レコード数
- 市区町村数
- 各市区町村の施設数
- エラー情報（解析できなかったレコード）

## 注意事項

1. **データの整合性**: 元のCSVファイルと分割後のファイルの総レコード数が一致することを確認してください
2. **文字エンコーディング**: すべてのファイルはUTF-8エンコーディングで保存されています
3. **座標データ**: 経度・緯度データは元のデータをそのまま使用しています
4. **更新**: 元データが更新された場合は、分割スクリプトを再実行してください

## トラブルシューティング

### よくある問題

1. **ファイルが見つからない**
   - 入力CSVファイルのパスが正しいか確認
   - 実行ディレクトリが正しいか確認

2. **文字化け**
   - ファイルエンコーディングがUTF-8になっているか確認
   - テキストエディタの設定を確認

3. **データの欠損**
   - 実行ログのエラー情報を確認
   - 元データの形式に問題がないか確認

### サポート

問題が発生した場合は、以下の情報を含めてお問い合わせください：

- 使用環境（Node.jsバージョン、OS）
- 実行コマンド
- エラーメッセージ
- 入力データのサンプル

---

## 更新履歴

- 2025-07-11: 初版作成
  - 東京都バリアフリートイレデータの市区町村別分割機能を実装
  - 23特別区、多摩地域、島嶼部の3つのカテゴリに分割
  - 統計情報表示機能を追加